name: Generate Lunar Calendar

on:
  # ĞĞ²Ñ‚Ğ¾Ğ·Ğ°Ğ¿ÑƒÑĞº 28-Ğ³Ğ¾ Ñ‡Ğ¸ÑĞ»Ğ° ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ¼ĞµÑÑÑ†Ğ° Ğ² 00:00 UTC
  schedule:
    - cron: '0 0 28 * *'
  # ĞšĞ½Ğ¾Ğ¿ĞºĞ° Â«Run workflowÂ» Ğ² UI
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“¥ Checkout repository
        uses: actions/checkout@v3
        with:
          persist-credentials: false

      - name: ğŸ Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: ğŸ“¦ Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install pendulum pyswisseph

      - name: ğŸš€ Generate lunar_calendar.json
        run: python gen_lunar_calendar.py

      - name: ğŸ“ Upload lunar_calendar.json artifact
        # Ğ·Ğ°ÑˆĞ¾Ñ‚Ğ¸Ğ»Ğ¸ Ğ½Ğ° ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğ¹ SHA, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¸Ğ·Ğ±ĞµĞ¶Ğ°Ñ‚ÑŒ "Missing download info"
        uses: actions/upload-artifact@d64b8b3fb9d0a9f0c80fe69a0c4b21db3a7437bb
        with:
          name: lunar-calendar
          path: lunar_calendar.json
