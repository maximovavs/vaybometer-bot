name: Generate Monthly Lunar Calendar

# –∑–∞–ø—É—Å–∫ –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å –º–µ—Å—è—Ü–∞ (UTC 00:00)
on:
  schedule:
    - cron: '0 0 28 * *'
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: üì• Checkout repo
        uses: actions/checkout@v3

      - name: üêç Setup Python 3.11
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: üì¶ Install dependencies
        run: |
          python -m pip install --upgrade pip
          # –µ—Å–ª–∏ —É –≤–∞—Å –≤ requirements.txt —É–∂–µ pendulum, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ:
          pip install pendulum requests

      - name: üîÜ Generate lunar_calendar.json
        # –∑–¥–µ—Å—å –≤–∞—à —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–≤–æ–¥–∏—Ç lunar_calendar.json –≤ –∫–æ—Ä–µ–Ω—å —Ä–µ–ø–æ
        run: python .github/scripts/generate_monthly_calendar.py

      - name: ‚öôÔ∏è Commit & Push lunar_calendar.json
        run: |
          git config user.name "github-actions"
          git config user.email "actions@github.com"
          git add lunar_calendar.json
          git commit -m "chore: update lunar_calendar.json for ${{ github.event.workflow }} ${{
 github.run_number }}"
          git push
        # —á—Ç–æ–±—ã –Ω–µ —Ñ–µ–π–ª–∏–ª–æ—Å—å, –µ—Å–ª–∏ –Ω–µ—á–µ–≥–æ –∫–æ–º–º–∏—Ç–∏—Ç—å:
        continue-on-error: true
