name: Daily VayboMeter Post

    on:
  schedule:
    # 18:00 UTC  = 21:00 Asia/Nicosia (Ğ»ĞµÑ‚Ğ¾Ğ¼)
    - cron: '0 18 * * *'
  workflow_dispatch:

jobs:
  post:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“¥ Checkout repo
        uses: actions/checkout@v3

      - name: ğŸ Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: "3.11"

      - name: ğŸ“¦ Install deps
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt  \
              requests python-dateutil pendulum astropy

      - name: ğŸš€ Run VayboĞœĞµÑ‚Ñ€ poster
        env:
          # â”€â”€â”€â”€â”€ Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ â”€â”€â”€â”€â”€
          OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}
          TELEGRAM_TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
          CHANNEL_ID:     ${{ secrets.CHANNEL_ID }}
          # â”€â”€â”€â”€â”€ Ğ½Ğ¾Ğ²Ñ‹Ğµ Ğ´Ğ»Ñ Ñ„Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… â”€â”€â”€â”€â”€
          OWM_KEY:        ${{ secrets.OWM_KEY }}          # OpenWeather
          AIRVISUAL_KEY:  ${{ secrets.AIRVISUAL_KEY }}    # IQAir / AirVisual
          AMBEE_KEY:      ${{ secrets.AMBEE_KEY }}        # Pollen (Ambee) â€”Â Ğ¿Ğ¾ Ğ¶ĞµĞ»Ğ°Ğ½Ğ¸Ñ
          COPERNICUS_USER: ${{ secrets.COPERNICUS_USER }} # Copernicus Marine SST
          COPERNICUS_PASS: ${{ secrets.COPERNICUS_PASS }}
        run: python post.py
